---
title: "Proyecto Final"
output: pdf_document
---


\centering

##Estudiantes: Emiliano Barone, María Noel Blanco

\raggedright

#INTRODUCCIÓN

Nuestro trabajo se basa en el análisis de los datos del Estudio Longitudinal de Bienestar del Uruguay llevado a cabo por el Instituto de Economía de la FCEA.Su objetivo general es "el abordaje sistemático del estudio de la evolución del bienestar desde un enfoque multidimensional, a partir de un relevamiento longitudinal representativo de los niños que concurren al sistema de educación primaria público." 

El trabajo tuvo inicio en el año 2004 y continua hasta el día de hoy. La segunda etapa fue en 2006, la tercera en 2011/12, la cuarta 2015/16 y este año comenzó la quinta. Nuestro trabajo se va a focalizar en la tercera ola cuando los que eran niños en 2004 pasaron a tener alrededor de 14 años.

Un aspecto positivo de los estudios longitudinales es que disponemos de información a lo largo del tiempo de la misma muestra de niños con la que se comenzó. Esto permite distinguir fenómenos de corto, medio y largo plazo, y su distribución. Además "se espera que una mayor comprensión de estos aspectos permita proporcionar insumos para el mejor diseño de políticas sociales que abarquen desde la temprana infancia hasta la adolescencia."

Para una primera exploración de los datos utilizaremos el software estadístico R.

#OBJETIVOS

El objetivo de este trabajo es generar un primer análisis de los datos del estudio longitudinal; un pantallazo general que permita conocer algunas de sus variables e incentivar futuras exploraciones.
Como objetivos específicos tenemos:

1. Crear una herramienta que represente una idea de la posición económica de los hogares (ICH).
2. Analizar distintos aspectos de la educación del, ahora, adolescente con respecto al ICH.
3.
4.
5. Creación de una herramienta que permite una visualización interactiva (Shiny App).

#DATOS

Los datos contienen información acerca de los niños, los adultos responsables y las características de sus hogares; abarcando un conjunto amplio de aspectos, como salud, nutrición, desarrollo socioemocional, ingresos, educación, trabajo, participación social y autonomía.

Los datos de este estudio están divididos en dos categorías: "personas" y "hogares". En nuestra exploración, sólo consideraremos la información proveniente de esta última categoría. Nuestra base de datos contiene 2151 observaciones y 397 variables, de las cuales utilizaremos únicamente algunas de las cualitativas.





\newpage

#ANÁLISIS EXPLORATORIO

Para llevar a cabo el análisis de los datos decidimos crear un indicador que toma en cuenta las principales características de los hogares y sus comodidades, con el fin de encontrar un sustituto de lo que sería la variable ingreso que perciben estos hogares. 

Para ello nos basamos en el INSE (Índice de Nivel Socioeconómico), que toma en cuenta variables relacionadas con la composición del hogar, la educación y atención en salud, elementos del confort del hogar y características de la vivienda. Con esta información se elabora un sistema de puntaje en el que asigna a cada variable un puntaje mínimo y máximo. Dependiendo de la respuesta proporcionada por el entrevistado, se obtiene una determinada cantidad de puntos por cada variable. La suma de ellos es el puntaje final.

Con la información proporcionada por este estudio longitudinal, no es posible contruir el INSE debido a la falta de muchas de sus variables. Por lo tanto, construimos un indicador utilizando el mismo sistema de puntaje que el INSE pero basado únicamente en las características y elementos de confort del hogar (ya que son los presentes en el estudio) al cual denominamos ICH (Indicador de Confort del Hogar).

\newpage



```{r, echo=FALSE, warning=FALSE, message=FALSE, fig.cap=""}

library(tidyverse)
library(arules)


datos=read.csv("Hogares3.csv", dec = ",")

INSE=datos%>%
  select(a1,a2,a6, a91:a910, a912, a914, a916:a917, a919)

ICH=INSE%>%
  mutate(a1=case_when(
    a1=="1" ~ 0,
    a1=="2"~10),
    a2=case_when(
      a2=="1"~ 10,
      a2=="2" ~8,
      a2=="3" ~5,
      a2=="4" ~3,
      a2=="5" ~0
    ),
    a6=case_when(
      a6=="1"~ 0,
      a6=="2" ~2,
      a6=="3" ~3,
      a6=="4" ~4,
      a6=="5" ~5,
      a6=="6" ~5,
      a6=="7" ~5,
      a6=="8" ~5,
      a6=="9" ~5
    ),
    a91=case_when(
      a91=="1" ~ 7,
      a91=="2"~0),
    a92=case_when(
      a92=="1" ~ 7,
      a92=="2"~0),
    a93=case_when(
      a93=="1" ~ 5,
      a93=="2"~0),
    a94=case_when(
      a94=="1" ~ 2,
      a94=="2"~0),
    a95=case_when(
      a95=="1" ~ 7,
      a95=="2"~0),
    a96=case_when(
      a96=="1" ~ 6,
      a96=="2"~0),
    a97=case_when(
      a97=="1" ~ 3,
      a97=="2"~0),
    a98=case_when(
      a98=="1" ~ 5,
      a98=="2"~0),
    a99=case_when(
      a99=="1" ~ 2,
      a99=="2"~0),
    a910=case_when(
      a910=="1" ~ 2,
      a910=="2"~0),
    a912=case_when(
      a912=="1" ~ 4,
      a912=="2"~0),
    a914=case_when(
      a914=="1" ~ 6,
      a914=="2"~0),
    a916=case_when(
      a916=="1" ~ 6,
      a916=="2"~0),
    a917=case_when(
      a917=="1" ~ 8,
      a917=="2"~0),
    a919=case_when(
      a919=="1" ~ 5,
      a919=="2"~0)
  )

ICH[is.na(ICH)] <- 0

ICH=ICH%>%
  mutate(Puntaje=rowSums(ICH))


datos=cbind(datos, ICH[,19])


datos$`ICH[, 19]`=discretize(datos$`ICH[, 19]`, method = "interval", breaks = 10)


datos=datos%>%
  mutate(b2=case_when(
    b2=="1" ~ "SI",
    b2=="2"~"NO"))

datos$b2=as.factor(datos$b2)

datos%>%
  filter(!is.na(b2))%>%
  ggplot()+
  geom_bar(aes((`ICH[, 19]`), fill=b2), position= "fill")+
  labs(x="ICH en intervalos", y="Proporción", fill="Repitió año")+
  ggtitle("Barplot desempeño educativo.")

```





```{r, echo=FALSE, warning=FALSE, message=FALSE}


datos=datos%>%
  mutate(b4=case_when(
    b4=="1" ~ "SI",
    b4=="2"~"NO"))

datos$b4=as.factor(datos$b4)

datos%>%
  filter(!is.na(b4))%>%
  ggplot()+
  geom_bar(aes((`ICH[, 19]`), fill=b4), position= "fill")+
  labs(x="ICH en intervalos", y="Proporción", fill="Asiste IE")+
  ggtitle("Barplot asistencia a centro educativo")
```

\newpage



```{r, echo=FALSE, warning=FALSE, message=FALSE}


datos=datos%>%
  mutate(b6=case_when(
    b6=="1" ~ "PUBLICO",
    b6=="2"~ "PRIVADO"))

datos$b6=as.factor(datos$b6)

datos%>%
  filter(!is.na(b6))%>%
  ggplot()+
  geom_bar(aes((`ICH[, 19]`), fill=b6), position= "fill")+
  labs(x="ICH en intervalos", y="Proporción", fill="Publico/Privado")+
  ggtitle("Barplot tipo de instituto educativo")

```


\newpage



```{r, echo=FALSE, warning=FALSE, message=FALSE}


datos=datos%>%
  mutate(b33a=case_when(
    b33a=="1" ~ "No es cierto",
    b33a=="2"~"Un tanto cierto"))

datos$b33a=as.factor(datos$b33a)

datos%>%
  filter(!is.na(b33a))%>%
  ggplot()+
  geom_bar(aes((`ICH[, 19]`), fill=b33a), position= "fill")+
  labs(x="ICH en intervalos", y="Proporción", fill="Vive c/2 padres")+
  ggtitle("Barplot convivencia con los padres")


```


\newpage



```{r, echo=FALSE, warning=FALSE, message=FALSE}


datos=datos%>%
  mutate(b31a=case_when(
    b31a=="1" ~ "Reconocida y exitosa",
    b31a=="2"~"Recursos suficientes",
    b31a=="3" ~ "Estudie a gusto",
    b31a=="4" ~ "Supere $ padres",
    b31a=="5" ~ "Supere $ amigos"))

datos$b31a=as.factor(datos$b31a)

datos%>%
  filter(!is.na(b31a))%>%
  ggplot()+
  geom_bar(aes((`ICH[, 19]`), fill=b31a), position= "fill")+
  labs(x="ICH en intervalos", y="Proporción", fill="Expectativas")+
  ggtitle("Barplot expectativas de los hijos")
```


\newpage



```{r, echo= FALSE, message=FALSE, warning=FALSE}
datos=datos%>%
  mutate(b10=case_when(
    b10=="1" ~ 1,
    b10=="2"~2,
    b10=="3"~3,
    b10=="4"~4,
    b10=="5"~5))

datos$b33a=as.factor(datos$b33a)

datos%>%
  filter(!is.na(b10))%>%
  ggplot()+
  geom_count(aes(`ICH[, 19]`, b10))+
  labs(x="ICH en intervalos", y="Nivel esperado", size="Cantidad de obs")



```


```{r, echo=FALSE, message=FALSE, warning=FALSE}

datos=datos%>%
  mutate(b15=case_when(
    b10=="1" ~ 1,
    b10=="2"~2,
    b10=="3"~3,
    b10=="4"~4,
    b10=="5"~5))

datos$b15=as.factor(datos$b15)

datos%>%
  filter(!is.na(b15), !is.na(`ICH[, 19]`))%>%
  group_by(`ICH[, 19]`, b15) %>%
  summarise(cont= n())%>%
  ggplot(mapping = aes(x = `ICH[, 19]`, y = b15)) +
  geom_tile(mapping = aes(fill = cont))

```

 

\newpage


Preguntas generales para responder
Variable ingreso.


